<!doctype html>
<html>

<head>
	<meta charset="utf-8">
	<meta http-equiv="Cache-Control" content="max-age=7200" />
	<meta content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=0" name="viewport" />
	<title>Recent Files</title>
	<link rel="stylesheet" type="text/css" href="./css/light.css" />
	<link rel="stylesheet" type="text/css" href="./css/dark.css" />

	<script type="text/javascript" src="../include/jquery-3.6.0.min.js"></script>
	<script type="text/javascript" src="../include/json2.js"></script>
	<script type="text/javascript" src="../include/globalapi.js"></script>
	<script type="text/javascript" src="../data/text.js"></script>

	<script type="text/javascript" src="../thirdparty/vue/vue.global.prod.min.js"></script>
	<script type="text/javascript" src="../thirdparty/vue/pinia.iife.prod.js"></script>
	<script type="text/javascript" src="../thirdparty/vue/vue-i18n.global.prod.js"></script>
	<script type="text/javascript" src="../thirdparty/element-plus/index.full.min.js"></script>
	<script type="text/javascript" src="../utils/util.js"></script>
	<script type="text/javascript" src="../locales/index.js"></script>
	<script type="text/javascript" src="../utils/ipc.js"></script>
</head>

<body>
	<div id="app">
		<div id="content-board" class="z-scroll" board="recent">
			<div class="spacer-14"></div>
			<div id="menu-area">
				<div class="menu-item" @click="onClickNewProject()">
					<div class="menu-icon"><img src="img/new-project-icon.png"></div>
					<div>
						<div class="text-s1">{{ $t("homepage.newProject") }}</div>
						<div class="menu-desc">{{ $t("homepage.createNewProject") }}</div>
					</div>
				</div>
				<div class="menu-item" @click="onClickOpenProject()">
					<div class="menu-icon"><img src="img/open-project-icon.png"></div>
					<div>
						<div class="text-s1">{{ $t("homepage.openProject") }}</div>
						<div class="menu-desc">3mf</div>
					</div>
				</div>
			</div>

			<div id="debug-text"></div>
			<div id="recent-file-area">
				<div id="recent-title-block">
					<div id="recent-title" class="content-title text-s1">{{ $t("homepage.recentOpen") }}</div>
					<div id="recent-clear-all-btn" class="text-s1" @click="onDeleteAllRecentFiles()">{{
						$t("homepage.clearAll") }}
					</div>
				</div>
				<div id="file-list">
					<div v-if="recentFiles.length === 0" class="no-recent-files">
						<p>{{ $t("homepage.noRecentFiles") || "No recent files" }}</p>
					</div>
					<div v-for="(file, index) in recentFiles" :key="index" class="file-card"
						@click="onOpenRecentFile(file)"
						@contextmenu.prevent="onRightClickRecentFile($event, file, index)">
						<div class="file-card-preview">
							<el-tooltip :content="file.path" placement="top" :show-after="800" >
								<el-image :src="file.image">
									<template #error>
										<div class="file-placeholder">
											<div class="placeholder-icon">
												<svg viewBox="0 0 1024 1024">
													<path fill="currentColor"
														d="M160 160v704h704V160zm-32-64h768a32 32 0 0 1 32 32v768a32 32 0 0 1-32 32H128a32 32 0 0 1-32-32V128a32 32 0 0 1 32-32">
													</path>
													<path fill="currentColor"
														d="M384 288q64 0 64 64t-64 64-64-64 64-64M185.408 876.992l-50.816-38.912L350.72 556.032a96 96 0 0 1 134.592-17.856l1.856 1.472 122.88 99.136a32 32 0 0 0 44.992-4.864l216-269.888 49.92 39.936-215.808 269.824-.256.32a96 96 0 0 1-135.04 14.464l-122.88-99.072-.64-.512a32 32 0 0 0-44.8 5.952z">
													</path>
												</svg>
											</div>
										</div>
									</template>
								</el-image>
							</el-tooltip>
						</div>
						<div class="file-card-info">
							<div class="file-card-name text-s1" :title="file.project_name">{{ file.project_name }}</div>
							<div class="file-card-time">{{ file.time }}</div>
						</div>
					</div>
				</div>
			</div>

			<div class="spacer-14"></div>

			<div id="recent-context-menu">
				<div id="ct-delete-bar" class="ct-item" @click="onDeleteRecentFile()">
					<div class="ct-icon ct-delete"></div>
					<div class="ct-text">{{ $t("homepage.remove") }}</div>
				</div>
				<div id="ct-folder-bar" class="ct-item " @click="onExploreRecentFile()">
					<div class="ct-icon ct-explore"></div>
					<div class="ct-text">{{ $t("homepage.openInExplorer") }}</div>
				</div>
			</div>
		</div>
	</div>
	<script type="text/javascript" src="./recent.js"></script>
</body>

</html>