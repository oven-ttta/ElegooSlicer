---
type: agent-request
description: Apply when user mentions build, compile, test, CMake, or asks about building/testing. Contains build commands and testing guidelines.
---

# Build and Test

## Build Commands

### Building on Windows
```bash
# Build everything
build_release_vs2022.bat

# Build with debug symbols
build_release_vs2022.bat debug

# Build with debug info
build_release_vs2022.bat debuginfo

# Build only dependencies
build_release_vs2022.bat deps
build_release_vs2022.bat deps debug
build_release_vs2022.bat deps debuginfo

# Build only slicer (after deps are built)
build_release_vs2022.bat slicer
build_release_vs2022.bat slicer debug
build_release_vs2022.bat slicer debuginfo

# Pack dependencies
build_release_vs2022.bat pack

# Pack installer
build_release_vs2022.bat pack_install
build_release_vs2022.bat slicer pack_install

# Test environment
build_release_vs2022.bat test
build_release_vs2022.bat slicer test
```

### Building on macOS
```bash
# Build everything (dependencies and slicer)
./build_release_macos.sh

# Build only dependencies
./build_release_macos.sh -d

# Build only slicer (after deps are built)
./build_release_macos.sh -s

# Use Ninja generator for faster builds
./build_release_macos.sh -x

# Build for specific architecture
./build_release_macos.sh -a arm64    # or x86_64 or universal

# Build for specific macOS version target
./build_release_macos.sh -t 11.3

# Build config (Debug or Release)
./build_release_macos.sh -c Debug

# Pack dependencies
./build_release_macos.sh -p

# Test environment
./build_release_macos.sh -e

# Other options:
./build_release_macos.sh -b    # build only (skip CMake configure)
./build_release_macos.sh -1    # single core build
./build_release_macos.sh -n    # nightly build
```

### Building on Linux
```bash
# First time setup - install system dependencies
./build_linux.sh -u

# Build dependencies and slicer
./build_linux.sh -dsi

# Build everything (alternative)
./build_linux.sh -dsi

# Individual options:
./build_linux.sh -d    # dependencies only
./build_linux.sh -s    # slicer only  
./build_linux.sh -i    # build AppImage

# Performance and debug options:
./build_linux.sh -j N  # limit to N cores
./build_linux.sh -1    # single core build
./build_linux.sh -b    # debug build
./build_linux.sh -c    # clean build
./build_linux.sh -r    # skip RAM/disk checks
./build_linux.sh -l    # use Clang instead of GCC
./build_linux.sh -L    # use ld.lld linker
./build_linux.sh -p    # disable precompiled headers
./build_linux.sh -C    # enable colored output

# Build with tests:
./build_linux.sh -t    # enable tests
./build_linux.sh -dst  # build deps + slicer + tests
```

### Build System
- Uses CMake with minimum version 3.13 (maximum 3.31.x on Windows)
- Primary build directory: `build/`
- Dependencies are built in `deps/build/`
- The build process is split into dependency building and main application building
- Windows builds use Visual Studio generators
- macOS builds use Xcode by default, Ninja with -x flag
- Linux builds use Ninja generator

### Testing
Tests are located in the `tests/` directory and use the Catch2 testing framework. Test structure:
- `tests/libslic3r/` - Core library tests (21 test files)
  - Geometry processing, algorithms, file formats (STL, 3MF, AMF)
  - Polygon operations, clipper utilities, Voronoi diagrams
- `tests/fff_print/` - Fused Filament Fabrication tests (12 test files)
  - Slicing algorithms, G-code generation, print mechanics
  - Fill patterns, extrusion, support material
- `tests/sla_print/` - Stereolithography tests (4 test files)
  - SLA-specific printing algorithms, support generation
- `tests/libnest2d/` - 2D nesting algorithm tests
- `tests/slic3rutils/` - Utility function tests
- `tests/sandboxes/` - Experimental/sandbox test code

Run all tests after building:
```bash
cd build && ctest
```

Run tests with verbose output:
```bash
cd build && ctest --output-on-failure
```

Run individual test suites:
```bash
# From build directory
./tests/libslic3r/libslic3r_tests
./tests/fff_print/fff_print_tests
./tests/sla_print/sla_print_tests
```

## Testing Guidelines

- Suggest build/test commands, don't auto-run them
- Recommend testing after algorithm or core logic changes
- Unit tests for new utility functions
- Regression tests for bug fixes when appropriate
